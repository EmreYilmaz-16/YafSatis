function addEqRow(e,t){try{var n=EqArr.findIndex(t=>t==e.PropList);if(-1!=n)return!1;var a=document.createElement("div");a.setAttribute("class","alert alert-success eq_header"),a.setAttribute("style","position:relative"),a.setAttribute("data-PropList",e.PropList);var r=document.createElement("table");r.setAttribute("class","EqTableMain");var i=document.createElement("tr"),d=document.createElement("td"),l=document.createElement("button");l.setAttribute("class","ui-wrk-btn");var o='<span class="icn-md icon-down"></span>';l.innerHTML=o,l.setAttribute("onclick","$('#SLO_'"+e.PropList+").toggle()");var p=document.createElement("button");p.setAttribute("class","ui-wrk-btn ui-wrk-btn-extra");o='<span class="icn-md fa fa-check-square-o"></span>';p.innerHTML=o;var s=document.createElement("button");s.setAttribute("class","ui-wrk-btn ui-wrk-btn-success");o='<span class="icn-md fa fa-plus"></span>';s.innerHTML=o,s.setAttribute("onclick","addRowCrs('"+e.PropList+"')");var u=document.createElement("button");u.setAttribute("class","ui-wrk-btn ui-wrk-btn-warning");o='<span class="icn-md fa fa-edit"></span>';u.innerHTML=o;var c=document.createElement("button");c.setAttribute("class","ui-wrk-btn ui-wrk-btn-red");o='<span class="icn-md icon-remove"></span>';c.setAttribute("onclick","SeciliSil('"+e.PropList+"')"),c.innerHTML=o;var m=document.createElement("button");m.setAttribute("class","ui-wrk-btn "),m.setAttribute("style","background:#292424 !important;color:white"),m.setAttribute("onclick","SeperatorSil('"+e.PropList+"')"),m.innerHTML='<span class="icn-md fa fa-trash"></span>';var E=document.createElement("button");E.setAttribute("class","ui-wrk-btn ui-wrk-btn-extra"),E.innerHTML='<span class="icn-md icon-filter"></span>',E.setAttribute("onclick","lookProducts('"+e.PropList+"')");var _=document.createElement("div");_.setAttribute("style","display:flex"),p.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),s.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),u.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),c.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),m.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),E.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),_.appendChild(p),_.appendChild(s),_.appendChild(u),_.appendChild(c),_.appendChild(m),_.appendChild(E);var C=document.createElement("input");C.id="SeperatorRC_"+e.PropList,C.name="SeperatorRC_"+e.PropList,C.type="hidden",C.value=1,d.appendChild(C),i.appendChild(d);var A=10;for(let t=0;t<e.Filters.length;t++){const n=e.Filters[t];d=document.createElement("td");d.setAttribute("style","border-right:solid 1px;width:"+A+"%");var O="<span style='font-weight:bold'>"+n.PNAME+"</span></br><span>"+n.PRODUCT_CAT+"</span>";d.innerHTML=O,i.appendChild(d)}var T=0,R=0;if(e.Filters.length<12){T=100-e.Filters.length*A,R=T;d=document.createElement("td");d.setAttribute("style","width:"+R+"%"),i.appendChild(d)}r.appendChild(i);C=document.createElement("input");C.setAttribute("type","hidden"),C.value=t,C.name="AddedEquipment",C.id="AddedEquipment_"+e.PropList,a.appendChild(C),a.appendChild(r);var h=document.createElement("div");h.setAttribute("style","background:white"),h.setAttribute("id","SLO_"+e.PropList);var b=document.createElement("table");b.setAttribute("class","SubSepet table");var I=document.createElement("thead");i=document.createElement("tr");i.appendChild(thCrate("#",!0)),i.appendChild(thCrate("Part No",!0)),i.appendChild(thCrate("Part Name",!0)),i.appendChild(thCrate("Quantity",!0)),i.appendChild(thCrate("Unit",!0)),i.appendChild(thCrate("Purchase Price",!1)),i.appendChild(thCrate("Purchase Price",!0)),i.appendChild(thCrate("Sales Discount",!1)),i.appendChild(thCrate("Unit Price",!0)),i.appendChild(thCrate("Total Price",!1)),i.appendChild(thCrate("First Remark",!0)),i.appendChild(thCrate("Delivered Items",!1)),i.appendChild(thCrate("Deliver Date",!0)),i.appendChild(thCrate("Weight",!0)),I.appendChild(i),b.appendChild(I),b.id="SubSepet_"+e.PropList;var v=document.createElement("tbody");v.id="SubSepetBody_"+e.PropList,b.appendChild(v),h.appendChild(b),a.appendChild(h);var S='<button class="ui-wrk-btn ui-wrk-btn-extra" style="position: absolute;right: 0;top: 0;display:none"><span id="RC_'+e.PropList+'">0</span> Rows Listed<br><span id="TOTALE_'+e.PropList+'">0 '+OfferData.OTHER_MONEY+"</span></button>";S='<button class="ui-wrk-btn ui-wrk-btn-extra" style="position: absolute;right: 0;top: 0;display:none"><span id="RC_'+e.PropList+'">0</span> Rows Listed<br><span id="TOTALE_'+e.PropList+'">0 '+OfferData.OTHER_MONEY+"</span></button>";S=$(S)[0],a.appendChild(S),document.getElementById("BasketArea").appendChild(a),EqArr.push(e.PropList)}catch{addEqRow_01(e,t)}}function addEqRow_01(e,t){try{var n=EqArr.findIndex(t=>t==e.PROPLIST);if(-1!=n)return!1;var a=document.createElement("div");a.setAttribute("class","alert alert-success eq_header"),a.setAttribute("style","position:relative"),a.setAttribute("data-PropList",e.PROPLIST);var r=document.createElement("table");r.setAttribute("class","EqTableMain");var i=document.createElement("tr"),d=document.createElement("td"),l=document.createElement("button");l.setAttribute("class","ui-wrk-btn");var o='<span class="icn-md icon-down"></span>';l.innerHTML=o,l.setAttribute("onclick","$('#SLO_'"+e.PROPLIST+").toggle()");var p=document.createElement("button");p.setAttribute("class","ui-wrk-btn ui-wrk-btn-extra");o='<span class="icn-md fa fa-check-square-o"></span>';p.innerHTML=o;var s=document.createElement("button");s.setAttribute("class","ui-wrk-btn ui-wrk-btn-success");o='<span class="icn-md fa fa-plus"></span>';s.innerHTML=o,s.setAttribute("onclick","addRowCrs('"+e.PROPLIST+"')");var u=document.createElement("button");u.setAttribute("class","ui-wrk-btn ui-wrk-btn-warning");o='<span class="icn-md fa fa-edit"></span>';u.innerHTML=o;var c=document.createElement("button");c.setAttribute("class","ui-wrk-btn ui-wrk-btn-red");o='<span class="icn-md icon-remove"></span>';c.setAttribute("onclick","SeciliSil('"+e.PROPLIST+"')"),c.innerHTML=o;var m=document.createElement("button");m.setAttribute("class","ui-wrk-btn "),m.setAttribute("style","background:#292424 !important;color:white"),m.setAttribute("onclick","SeperatorSil('"+e.PROPLIST+"')"),m.innerHTML='<span class="icn-md fa fa-trash"></span>';var E=document.createElement("button");E.setAttribute("class","ui-wrk-btn ui-wrk-btn-extra"),E.innerHTML='<span class="icn-md icon-filter"></span>',E.setAttribute("onclick","lookProducts('"+e.PROPLIST+"')");var _=document.createElement("div");_.setAttribute("style","display:flex"),p.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),s.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),u.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),c.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),m.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),E.setAttribute("style","font-size: 7px !important;padding: 3px 7px !important;"),_.appendChild(p),_.appendChild(s),_.appendChild(u),_.appendChild(c),_.appendChild(m),_.appendChild(E);var C=document.createElement("input");C.id="SeperatorRC_"+e.PROPLIST,C.name="SeperatorRC_"+e.PROPLIST,C.type="hidden",C.value=1,d.appendChild(C),i.appendChild(d);var A=10;for(let t=0;t<e.FILTERS.length;t++){const n=e.FILTERS[t];d=document.createElement("td");d.setAttribute("style","border-right:solid 1px;width:"+A+"%");var O="<span style='font-weight:bold'>"+n.PNAME+"</span></br><span>"+n.PRODUCT_CAT+"</span>";d.innerHTML=O,i.appendChild(d)}var T=0,R=0;if(e.FILTERS.length<12){T=100-e.FILTERS.length*A,R=T;d=document.createElement("td");d.setAttribute("style","width:"+R+"%"),i.appendChild(d)}r.appendChild(i);C=document.createElement("input");C.setAttribute("type","hidden"),C.value=t,C.name="AddedEquipment",C.id="AddedEquipment_"+e.PROPLIST,a.appendChild(C),a.appendChild(r);var h=document.createElement("div");h.setAttribute("style","background:white"),h.setAttribute("id","SLO_"+e.PROPLIST);var b=document.createElement("table");b.setAttribute("class","SubSepet table");var I=document.createElement("thead");i=document.createElement("tr");i.appendChild(thCrate("#",!0)),i.appendChild(thCrate("Part No",!0)),i.appendChild(thCrate("Part Name",!0)),i.appendChild(thCrate("Quantity",!0)),i.appendChild(thCrate("Unit",!0)),i.appendChild(thCrate("Purchase Price",!1)),i.appendChild(thCrate("Purchase Price",!0)),i.appendChild(thCrate("Sales Discount",!1)),i.appendChild(thCrate("Unit Price",!0)),i.appendChild(thCrate("Total Price",!1)),i.appendChild(thCrate("First Remark",!0)),i.appendChild(thCrate("Delivered Items",!1)),i.appendChild(thCrate("Deliver Date",!0)),i.appendChild(thCrate("Weight",!0)),I.appendChild(i),b.appendChild(I),b.id="SubSepet_"+e.PROPLIST;var v=document.createElement("tbody");v.id="SubSepetBody_"+e.PROPLIST,b.appendChild(v),h.appendChild(b),a.appendChild(h);var S='<button class="ui-wrk-btn ui-wrk-btn-extra" style="position: absolute;right: 0;top: 0;display:none"><span id="RC_'+e.PROPLIST+'">0</span> Rows Listed<br><span id="TOTALE_'+e.PROPLIST+'">0 '+OfferData.OTHER_MONEY+"</span></button>";S='<button class="ui-wrk-btn ui-wrk-btn-extra" style="position: absolute;right: 0;top: 0;display:none"><span id="RC_'+e.PROPLIST+'">0</span> Rows Listed<br><span id="TOTALE_'+e.PROPLIST+'">0 '+OfferData.OTHER_MONEY+"</span></button>";S=$(S)[0],a.appendChild(S),document.getElementById("BasketArea").appendChild(a),EqArr.push(e.PROPLIST)}catch{}}function addRowCrs(e,t="",n="",a="",r,i="",d=1,l="",o=0,p="",s=0,u=0,c=0,m=0,E="",_=0,C=0,A=0,O="",T=""){$("#SLO_"+e).show();var R=document.createElement("tr"),h=document.createElement("td");h.setAttribute("style","vertical-align:middle;font-weight:bold");var b=document.createElement("input");b.type="checkbox",b.name="CBX",b.id="CBX_"+RowCount,b.setAttribute("class","SatirSecCbx");var I=document.createElement("input");I.type="hidden",I.name="IS_VIRTUAL",I.id="IS_VIRTUAL_"+RowCount,I.value=A;var v=document.createElement("input");v.type="hidden",v.name="UNIQUE_RELATION_ID",v.id="UNIQUE_RELATION_ID_"+RowCount,O.length>0?v.value=O:v.value=GenerateUniqueId();var S=document.createElement("span");S.innerText=RowCount;var g=document.createElement("span"),f=document.getElementById("SeperatorRC_"+e).value;f=parseInt(f),g.innerText=f;var y=document.createElement("div");y.setAttribute("style","display:flex"),y.appendChild(I),y.appendChild(v),y.appendChild(S),f++,h.appendChild(y),R.appendChild(h),document.getElementById("SeperatorRC_"+e).value=f;h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");b=document.createElement("input");b.setAttribute("type","text"),b.name="PRODUCT_CODE_2",b.value=i,b.id="PRODUCT_CODE_2_"+RowCount,b.setAttribute("proplist",e),b.setAttribute("readonly","true"),y.appendChild(b);b=document.createElement("input");b.type="hidden",b.name="PRODUCT_ID",b.id="PRODUCT_ID_"+RowCount,b.value=t,y.appendChild(b);b=document.createElement("input");b.type="hidden",b.name="STOCK_ID",b.id="STOCK_ID_"+RowCount,b.value=n,y.appendChild(b);b=document.createElement("input");b.type="hidden",b.name="TAX",b.value=r,b.id="TAX_"+RowCount,y.appendChild(b),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");b=document.createElement("input");b.setAttribute("type","text"),b.name="PRODUCT_NAME",b.value=a,b.id="PRODUCT_NAME_"+RowCount,b.setAttribute("style","text-align:left"),y.appendChild(b),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");b=document.createElement("input");b.setAttribute("type","text"),b.name="QUANTITY",b.id="QUANTITY_"+RowCount,b.value=commaSplit(d),b.setAttribute("onchange","AlayiniHesapla()"),y.appendChild(b),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");b=document.createElement("select");var L=document.createElement("option");L.value=l,L.innerText=l,b.name="PRODUCT_UNIT",b.id="PRODUCT_UNIT_"+RowCount,b.appendChild(L),y.appendChild(b),h.appendChild(y),R.appendChild(h);h=document.createElement("td");h.setAttribute("style","display:none");y=document.createElement("div");y.setAttribute("class","form-group");var P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="PURCHASE_PRICE",b.id="PURCHASE_PRICE_"+RowCount,b.value=commaSplit(o),P.appendChild(b);b=document.createElement("select");0==p.length&&(p=OfferData.OTHER_MONEY),b.innerHTML=CreateOptionList(1,p),b.name="PURCHASE_MONEY",b.id="PURCHASE_MONEY_"+RowCount,b.setAttribute("class","input-group-text"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="SALE_PRICE",b.id="SALE_PRICE_"+RowCount,b.value=commaSplit(s),b.setAttribute("onchange","AlayiniHesapla()"),P.appendChild(b);b=document.createElement("select");b.innerHTML=CreateOptionList(1,OfferData.OTHER_MONEY),b.name="SALE_MONEY",b.id="SALE_MONEY_"+RowCount,b.setAttribute("disabled","yes"),b.setAttribute("class","input-group-text"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td");h.setAttribute("style","display:none");y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="SALE_DISCOUNT",b.id="SALE_DISCOUNT_"+RowCount,b.value=commaSplit(u),b.setAttribute("onchange","AlayiniHesapla()"),P.appendChild(b);b=document.createElement("select");b.innerHTML=CreateOptionList(1,OfferData.OTHER_MONEY),b.name="SALE_DISCOUNT_MONEY",b.setAttribute("disabled","yes"),b.id="SALE_DISCOUNT_MONEY_"+RowCount,b.setAttribute("class","input-group-text"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="UNIT_PRICE",b.id="UNIT_PRICE_"+RowCount,b.value=commaSplit(c),b.setAttribute("readonly","yes"),P.appendChild(b);b=document.createElement("select");b.innerHTML=CreateOptionList(1,OfferData.OTHER_MONEY),b.name="UNIT_PRICE_MONEY",b.id="UNIT_PRICE_MONEY_"+RowCount,b.setAttribute("class","input-group-text"),b.setAttribute("disabled","yes"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td");h.setAttribute("style","display:none");y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="TOTAL_PRICE",b.id="TOTAL_PRICE_"+RowCount,b.setAttribute("readonly","yes"),b.value=commaSplit(m),P.appendChild(b);b=document.createElement("select");b.innerHTML=CreateOptionList(1,OfferData.OTHER_MONEY),b.name="TOTAL_PRICE_MONEY",b.id="TOTAL_PRICE_MONEY_"+RowCount,b.setAttribute("disabled","yes"),b.setAttribute("class","input-group-text"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="FIRST_REMARK",b.value=E,b.id="FIRST_REMARK_"+RowCount,P.appendChild(b);b=document.createElement("span");b.setAttribute("class","input-group-addon btnPointer icon-remove"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td");h.setAttribute("style","display:none");y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="DELIVERED_ITEMS",b.id="DELIVERED_ITEMS_"+RowCount,b.value=commaSplit(_),P.appendChild(b);b=document.createElement("select");b.innerHTML="",b.name="DELIVERED_ITEMS_UNIT",b.id="DELIVERED_ITEMS_UNIT_"+RowCount,b.setAttribute("class","input-group-text"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");b=document.createElement("input");b.setAttribute("type","date"),b.name="ROW_DELIVER_DATE",b.id="ROW_DELIVER_DATE_"+RowCount,b.value=T,y.appendChild(b),h.appendChild(y),R.appendChild(h);h=document.createElement("td"),y=document.createElement("div");y.setAttribute("class","form-group");P=document.createElement("div");P.setAttribute("class","input-group"),P.setAttribute("style","display:flex");b=document.createElement("input");b.setAttribute("type","text"),b.name="WEIGHT",b.id="WEIGHT_"+RowCount,b.value=commaSplit(C),P.appendChild(b);b=document.createElement("select");b.innerHTML="",b.name="WEIGHT_UNIT",b.id="WEIGHT_UNIT_"+RowCount,b.setAttribute("class","input-group-text"),P.appendChild(b),y.appendChild(P),h.appendChild(y),R.appendChild(h),document.getElementById("SubSepetBody_"+e).appendChild(R),RowCount++}function thCrate(e,t){var n=document.createElement("th");return n.innerText=e,t?n.setAttribute("class","tablesorter-header tablesorter-headerUnSorted"):(n.setAttribute("class","tablesorter-header tablesorter-headerUnSorted"),n.setAttribute("style","display:none")),n}function CreateOptionList(e,t="EUR"){if(1==e){var n=wrk_safe_query("getMoneyList","dsn"),a=n.MONEY,r="";for(let e=0;e<a.length;e++){const n=a[e];r+=t==n?"<option  selected value='"+n+"'>"+n+"</option>":"<option  value='"+n+"'>"+n+"</option>"}$("ReturnStr");return r}}function AlayiniHesapla(){paraBirimleriniEsitle(),AktifSepet=[],OrderFooter={total_default:0,genel_indirim_:0,total_discount_wanted:0,brut_total_wanted:0,total_tax_wanted:0,net_total_wanted:0,other_money:"TL"};var e=document.getElementById("BasketArea").children;for(let V=0;V<e.length;V++){var t=e[V],n=t.getAttribute("data-proplist"),a=document.getElementById("AddedEquipment_"+n).value,r=JSON.parse(a),i=document.getElementById("SubSepetBody_"+n),d=0,l=i.children.length;document.getElementById("RC_"+n).innerText=l;var o=0,p=KurGetir(document.getElementById("MONEY").value);for(let e=0;e<i.children.length;e++){var s=i.children[e];o++;var u=DegeriGetir(s,"PRODUCT_ID",1),c=DegeriGetir(s,"IS_VIRTUAL",1),m=DegeriGetir(s,"PRODUCT_NAME",0),E=DegeriGetir(s,"PRODUCT_CODE_2",0),_=DegeriGetir(s,"ROW_DELIVER_DATE",0),C=0;0==OfferSettings.IS_TAX_ZERO&&(C=DegeriGetir(s,"TAX",2,0));var A=DegeriGetir(s,"STOCK_ID",1),O=DegeriGetir(s,"QUANTITY",2,1),T=DegeriGetir(s,"PRODUCT_UNIT",0),R=DegeriGetir(s,"PURCHASE_PRICE",2,1),h=DegeriGetir(s,"PURCHASE_MONEY",0),b=DegeriGetir(s,"SALE_PRICE",2,1),I=DegeriGetir(s,"SALE_MONEY",0),v=document.getElementById("GENERAL_DISCOUNT").value,S=parseFloat(filterNum(commaSplit(v))),g=b*S/100;DegerYaz(s,"SALE_DISCOUNT",2,g);var f=DegeriGetir(s,"SALE_DISCOUNT",2,1),y=DegeriGetir(s,"UNIQUE_RELATION_ID",0),L=DegeriGetir(s,"SALE_DISCOUNT_MONEY",0,0),P=DegeriGetir(s,"TOTAL_PRICE_MONEY",0,0),N=b-f;DegerYaz(s,"UNIT_PRICE",2,N);var w=0;if(p.MONEY==P)w=N*O;else{var D=MONEY_ARR.findIndex(e=>e.MONEY==P),M=MONEY_ARR[D],x=p.RATE2/M.RATE2;w=N*O*x}var U=b,F=b*p.RATE2;DegerYaz(s,"TOTAL_PRICE",2,w);var Y=N*O*p.RATE2,H=Y*C/100,k=Y+H,B={PRODUCT_ID:u,STOCK_ID:A,PRODUCT_NAME:m,PRODUCT_CODE_2:E,AMOUNT:O,PRICE_OTHER:U,PRICE:F,OTHER_MONEY:OfferData.OTHER_MONEY,OTHER_MONEY_VALUE:w,DISCOUNT_COST:f,TL_TOTAL_PRICE:Y,PRODUCT_UNIT:T,PURCHASE_PRICE:R,PURCHASE_MONEY:h,SALE_PRICE:b,SALE_PRICE:b,SALE_MONEY:I,IS_VIRTUAL:c,UNIQUE_RELATION_ID:y,ROW_DELIVER_DATE:_,SALE_DISCOUNT:f,PROP_LIST:n,JSON_STRINGIM:r,SALE_DISCOUNT_MONEY:L,UNIT_PRICE:N,TOTAL_PRICE:w,TOTAL_PRICE_MONEY:P,TAX_RATE:C,TAX:H,WITH_TAX:k,RATE2:p.RATE2,SEPET_SIRA:o};if(B.TLF=B.OTHER_MONEY_VALUE*p.RATE2,B.TOTAL_PRICE_MONEY==p.MONEY)d+=B.TOTAL_PRICE;else{var G=MONEY_ARR.findIndex(e=>e.MONEY==B.TOTAL_PRICE_MONEY),$=MONEY_ARR[G].RATE2;d+=B.TOTAL_PRICE*$}OrderFooter.total_default+=B.PRICE_OTHER*O,OrderFooter.total_discount_wanted+=B.PRICE_OTHER*B.AMOUNT-B.UNIT_PRICE*B.AMOUNT,AktifSepet.push(B)}OrderFooter.TOTAL_PRICE+=d}var V=document.getElementById("genel_indirim_").value;V.length>0?(V=filterNum(commaSplit(V)),V=parseFloat(V),document.getElementById("genel_indirim_").value=commaSplit(V),OrderFooter.genel_indirim_=V):(document.getElementById("genel_indirim_").value=commaSplit(0),V=0,OrderFooter.genel_indirim_=V),OrderFooter.total_discount_wanted+=V,OrderFooter.brut_total_wanted=OrderFooter.total_default-OrderFooter.total_discount_wanted,OrderFooter.total_tax_wanted=0,OrderFooter.net_total_wanted=OrderFooter.total_default-OrderFooter.total_discount_wanted+OrderFooter.total_tax_wanted,OzetOlustur()}function KurGetir(e){var t=MONEY_ARR.findIndex(t=>t.MONEY==e);return MONEY_ARR[t]}function DegeriGetir(e,t,n=0,a=0){var r=$(e).find("input[name='"+t+"']").val(),i=0;if(r)0==n?i=r:1==n?i=parseInt(r):2==n&&(i=commaSplit(r).indexOf("NaN")>=0?parseFloat(filterNum(r)):parseFloat(filterNum(commaSplit(r)))),1==a&&(2!=n&&1!=n||$(e).find("input[name='"+t+"']").val(commaSplit(i)));else{r=$(e).find("select[name='"+t+"']").val();0==n?i=r:1==n?i=parseInt(r):2==n&&(i=parseFloat(filterNum(commaSplit(r))))}return i}function DegerYaz(e,t,n=0,a){console.log(arguments);var r=$(e).find("input[name='"+t+"']")[0];console.log(r);var i=0;r?0==n?i=a:1==n?i=commaSplit(a):2==n&&(i=commaSplit(a)):(r=$(e).find("select[name='"+t+"']")[0],0==n?i=a:1==n?i=parseInt(a):2==n&&(i=parseFloat(filterNum(commaSplit(a))))),console.log(i),$(r).val(i)}function OzetOlustur(){var e=KurGetir(document.getElementById("MONEY").value);$("#brut_total_wanted").val(commaSplit(OrderFooter.brut_total_wanted)),$("#brut_total_wanted_").val(commaSplit(OrderFooter.brut_total_wanted*e.RATE2)),$("#genel_indirim_").val(commaSplit(OrderFooter.genel_indirim_)),$("#genel_indirim__").val(commaSplit(OrderFooter.genel_indirim_*e.RATE2)),$("#net_total_wanted").val(commaSplit(OrderFooter.net_total_wanted)),$("#net_total_wanted_").val(commaSplit(OrderFooter.net_total_wanted*e.RATE2)),$("#total_default").val(commaSplit(OrderFooter.total_default)),$("#total_default_").val(commaSplit(OrderFooter.total_default*e.RATE2)),$("#total_discount_wanted").val(commaSplit(OrderFooter.total_discount_wanted)),$("#total_discount_wanted_").val(commaSplit(OrderFooter.total_discount_wanted*e.RATE2)),$("#total_tax_wanted").val(commaSplit(OrderFooter.total_tax_wanted)),$("#total_tax_wanted_").val(commaSplit(OrderFooter.total_tax_wanted*e.RATE2)),OrderFooter.brut_total_wanted_=OrderFooter.brut_total_wanted*e.RATE2,OrderFooter.genel_indirim__=OrderFooter.genel_indirim_*e.RATE2,OrderFooter.net_total_wanted_=OrderFooter.net_total_wanted*e.RATE2,OrderFooter.total_default_=OrderFooter.total_default*e.RATE2,OrderFooter.total_discount_wanted_=OrderFooter.total_discount_wanted*e.RATE2,OrderFooter.total_tax_wanted_=OrderFooter.total_tax_wanted*e.RATE2}function indirimYuzdeHesap(){var e=document.getElementById("GENERAL_DISCOUNT").value,t=parseFloat(filterNum(commaSplit(e))),n=document.getElementsByClassName("SubSepet");for(let e=0;e<n.length;e++){var a=n[e].tBodies[e].children;for(let e=0;e<a.length;e++){var r=document.getElementById("SALE_PRICE_"+(e+1)).value;r=parseFloat(filterNum(commaSplit(r))),console.log(r);var i=r*t/100;console.log(i),document.getElementById("SALE_DISCOUNT_"+(e+1)).value=commaSplit(i),AlayiniHesapla()}}}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function SaveOffer(){AlayiniHesapla();var e=new Object;e.OFFER_HEADER=OfferData,e.ROWS=AktifSepet,e.OFFER_FOOTER=OrderFooter,e.Kurlar=MONEY_ARR,e.AKTIF_KUR=document.getElementById("MONEY").value,e.OFFER_ID=getParameterByName("offer_id"),e.DELIVER_FEE=document.getElementsByName("DELIVER_FEE")[0].value,e.TAX_STATUS=document.getElementsByName("TAX_STATUS")[0].value,e.GENERAL_DISCOUNT=document.getElementsByName("GENERAL_DISCOUNT")[0].value,e.DELIVERY_TIMES=document.getElementsByName("DELIVERY_TIMES")[0].value,$.ajax({url:"/AddOns/YafSatis/Partner/cfc/OfferService.cfc?method=SAVE_PURCHASE_OFFER_PRICES",data:{data:JSON.stringify(e)},type:"POST",success:function(e){$.notification(["Kayıt Edildi"],{messageType:"success"})}}),console.log(e)}function paraBirimleriniEsitle(){var e=document.getElementsByName("SALE_MONEY"),t=document.getElementsByName("UNIT_PRICE_MONEY"),n=document.getElementsByName("SALE_DISCOUNT_MONEY"),a=document.getElementsByName("TOTAL_PRICE_MONEY");for(let r=0;r<e.length;r++)e[r].value=document.getElementById("MONEY").value,t[r].value=document.getElementById("MONEY").value,n[r].value=document.getElementById("MONEY").value,a[r].value=document.getElementById("MONEY").value}function HesaplaDeliveryDate(e,t){if(console.log(e),"DELIVER_DATE"==e){var n=date_format(t.value),a=new Date,r=date_format(a.toISOString()),i=datediff(r,n,0);console.log(i),document.getElementsByName("DELIVERY_TIMES")[0].value=i}else{var d=new Date,l=date_format(d.toISOString());console.log(l);var o=date_add("d",parseInt(t.value),l);console.log(o),console.log(t.value);var p="",s=o.split("/");1==s[0].length?p+="0"+s[0]+"/":p+=s[0]+"/",1==s[1].length?p+="0"+s[1]+"/":p+=s[1]+"/",1==s[2].length?p+="0"+s[2]+"/":p+=s[2],console.log(p);var u=p.split("/")[2]+"-"+p.split("/")[1]+"-"+p.split("/")[0];document.getElementsByName("DELIVER_DATE")[0].value=u}var c=document.getElementsByName("ROW_DELIVER_DATE"),m=document.getElementsByName("DELIVER_DATE")[0].value;for(let e=0;e<c.length;e++)c[e].value=m}var AktifSepet=[],OfferSettings={IS_TAX_ZERO:1},EqArr=[],RowCount=1;